{"ast":null,"code":"import _slicedToArray from\"/Users/Marina/Yandex Practicum/around-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import api from\"../utils/Api\";function Card(_ref){var card=_ref.card,onDeleteClick=_ref.onDeleteClick,onCardClick=_ref.onCardClick,userId=_ref.userId;var name=card.name,link=card.link,likes=card.likes,_id=card._id,owner=card.owner;var isCreatedByCurrentUser=owner._id===_id;var _React$useState=React.useState(likes.some(function(item){return item._id===userId;})),_React$useState2=_slicedToArray(_React$useState,2),isLikedByCurrentUser=_React$useState2[0],setIsLikedByCurrentUser=_React$useState2[1];var _React$useState3=React.useState(likes.length),_React$useState4=_slicedToArray(_React$useState3,2),numOfLikes=_React$useState4[0],setNumOfLikes=_React$useState4[1];var handleLikeIcon=function handleLikeIcon(){setIsLikedByCurrentUser(!isLikedByCurrentUser);api.changeLikeCardStatus(_id,isLikedByCurrentUser?\"DELETE\":\"PUT\").then(function(res){return setNumOfLikes(res.likes.length);}).catch(function(err){return\"Error: \".concat(err);});};function handleClick(){onCardClick(card);}return/*#__PURE__*/React.createElement(\"li\",{className:\"card\"},/*#__PURE__*/React.createElement(\"img\",{className:\"card__image\",alt:\"Pic: \".concat(name),src:link,onClick:handleClick}),/*#__PURE__*/React.createElement(\"div\",{className:\"card__text-container\"},/*#__PURE__*/React.createElement(\"p\",{className:\"card__text\"},name),/*#__PURE__*/React.createElement(\"div\",{className:\"card__likes-container\"},/*#__PURE__*/React.createElement(\"button\",{className:isLikedByCurrentUser?\"button button_like button_like-black\":\"button button_like\",onClick:handleLikeIcon}),/*#__PURE__*/React.createElement(\"p\",{className:\"card__likes-text\"},numOfLikes))),isCreatedByCurrentUser&&/*#__PURE__*/React.createElement(\"button\",{className:\"button button_delete\",onClick:onDeleteClick}));}export default Card;","map":{"version":3,"sources":["/Users/Marina/Yandex Practicum/around-react/src/components/Card.js"],"names":["React","api","Card","card","onDeleteClick","onCardClick","userId","name","link","likes","_id","owner","isCreatedByCurrentUser","useState","some","item","isLikedByCurrentUser","setIsLikedByCurrentUser","length","numOfLikes","setNumOfLikes","handleLikeIcon","changeLikeCardStatus","then","res","catch","err","handleClick"],"mappings":"kKAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,GAAP,KAAgB,cAAhB,CAEA,QAASC,CAAAA,IAAT,MAA4D,IAA5CC,CAAAA,IAA4C,MAA5CA,IAA4C,CAAtCC,aAAsC,MAAtCA,aAAsC,CAAvBC,WAAuB,MAAvBA,WAAuB,CAAVC,MAAU,MAAVA,MAAU,IAClDC,CAAAA,IADkD,CAChBJ,IADgB,CAClDI,IADkD,CAC5CC,IAD4C,CAChBL,IADgB,CAC5CK,IAD4C,CACtCC,KADsC,CAChBN,IADgB,CACtCM,KADsC,CAC/BC,GAD+B,CAChBP,IADgB,CAC/BO,GAD+B,CAC1BC,KAD0B,CAChBR,IADgB,CAC1BQ,KAD0B,CAE1D,GAAMC,CAAAA,sBAAsB,CAAGD,KAAK,CAACD,GAAN,GAAcA,GAA7C,CAF0D,oBAIFV,KAAK,CAACa,QAAN,CACtDJ,KAAK,CAACK,IAAN,CAAW,SAACC,IAAD,QAAUA,CAAAA,IAAI,CAACL,GAAL,GAAaJ,MAAvB,EAAX,CADsD,CAJE,oDAInDU,oBAJmD,qBAI7BC,uBAJ6B,0CAOtBjB,KAAK,CAACa,QAAN,CAAeJ,KAAK,CAACS,MAArB,CAPsB,qDAOnDC,UAPmD,qBAOvCC,aAPuC,qBAS1D,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAC3BJ,uBAAuB,CAAC,CAACD,oBAAF,CAAvB,CACAf,GAAG,CACAqB,oBADH,CACwBZ,GADxB,CAC6BM,oBAAoB,CAAG,QAAH,CAAc,KAD/D,EAEGO,IAFH,CAEQ,SAACC,GAAD,QAASJ,CAAAA,aAAa,CAACI,GAAG,CAACf,KAAJ,CAAUS,MAAX,CAAtB,EAFR,EAGGO,KAHH,CAGS,SAACC,GAAD,yBAAmBA,GAAnB,GAHT,EAID,CAND,CAQA,QAASC,CAAAA,WAAT,EAAuB,CACrBtB,WAAW,CAACF,IAAD,CAAX,CACD,CAED,mBACE,0BAAI,SAAS,CAAC,MAAd,eACE,2BAAK,SAAS,CAAC,aAAf,CAA6B,GAAG,gBAAUI,IAAV,CAAhC,CAAkD,GAAG,CAAEC,IAAvD,CAA6D,OAAO,CAAEmB,WAAtE,EADF,cAEE,2BAAK,SAAS,CAAC,sBAAf,eACE,yBAAG,SAAS,CAAC,YAAb,EAA2BpB,IAA3B,CADF,cAEE,2BAAK,SAAS,CAAC,uBAAf,eACE,8BACE,SAAS,CACPS,oBAAoB,CAChB,sCADgB,CAEhB,oBAJR,CAME,OAAO,CAAEK,cANX,EADF,cASE,yBAAG,SAAS,CAAC,kBAAb,EAAiCF,UAAjC,CATF,CAFF,CAFF,CAgBGP,sBAAsB,eACrB,8BAAQ,SAAS,CAAC,sBAAlB,CAAyC,OAAO,CAAER,aAAlD,EAjBJ,CADF,CAsBD,CAED,cAAeF,CAAAA,IAAf","sourcesContent":["import React from \"react\";\nimport api from \"../utils/Api\";\n\nfunction Card({ card, onDeleteClick, onCardClick, userId }) {\n  const { name, link, likes, _id, owner } = card;\n  const isCreatedByCurrentUser = owner._id === _id;\n\n  const [isLikedByCurrentUser, setIsLikedByCurrentUser] = React.useState(\n    likes.some((item) => item._id === userId)\n  );\n  const [numOfLikes, setNumOfLikes] = React.useState(likes.length);\n\n  const handleLikeIcon = () => {\n    setIsLikedByCurrentUser(!isLikedByCurrentUser);\n    api\n      .changeLikeCardStatus(_id, isLikedByCurrentUser ? \"DELETE\" : \"PUT\")\n      .then((res) => setNumOfLikes(res.likes.length))\n      .catch((err) => `Error: ${err}`);\n  };\n\n  function handleClick() {\n    onCardClick(card);\n  }\n\n  return (\n    <li className=\"card\">\n      <img className=\"card__image\" alt={`Pic: ${name}`} src={link} onClick={handleClick}/>\n      <div className=\"card__text-container\">\n        <p className=\"card__text\">{name}</p>\n        <div className=\"card__likes-container\">\n          <button\n            className={\n              isLikedByCurrentUser\n                ? \"button button_like button_like-black\"\n                : \"button button_like\"\n            }\n            onClick={handleLikeIcon}\n          />\n          <p className=\"card__likes-text\">{numOfLikes}</p>\n        </div>\n      </div>\n      {isCreatedByCurrentUser && (\n        <button className=\"button button_delete\" onClick={onDeleteClick} />\n      )}\n    </li>\n  );\n}\n\nexport default Card;\n"]},"metadata":{},"sourceType":"module"}