{"ast":null,"code":"import _objectSpread from\"/Users/Marina/Yandex Practicum/around-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/Marina/Yandex Practicum/around-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Marina/Yandex Practicum/around-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import{baseUrl,headers}from\"./utils\";var Auth=/*#__PURE__*/function(){function Auth(_ref){var baseUrl=_ref.baseUrl,headers=_ref.headers;_classCallCheck(this,Auth);this._baseUrl=baseUrl;this._headers=headers;}_createClass(Auth,[{key:\"_getResponseData\",value:function _getResponseData(res){return res.ok?res.json():Promise.reject(\"Error: \".concat(res.status));}//Register user\n},{key:\"registerUser\",value:function registerUser(data){return fetch(\"\".concat(this._baseUrl,\"/signup\"),{method:\"POST\",headers:this._headers,body:JSON.stringify(data)}).then(this._getResponseData);}//Sign in user\n},{key:\"signInUser\",value:function signInUser(data){return fetch(\"\".concat(this._baseUrl,\"/signin\"),{method:\"POST\",headers:this._headers,body:JSON.stringify(data)}).then(this._getResponseData);}//Sign out user\n// signOutUser() {\n//   return fetch(`${this._baseUrl}/signout`, {\n//     method: \"DELETE\",\n//     headers: this._headers,\n//   }).then(this._getResponseData);\n// }\n//Check token and get user email\n},{key:\"validateUser\",value:function validateUser(){return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{headers:_objectSpread({},this._headers)}).then(this._getResponseData);}}]);return Auth;}();var auth=new Auth({baseUrl:baseUrl,headers:headers});export default auth;","map":{"version":3,"sources":["/Users/Marina/Yandex Practicum/around-react/src/utils/auth.js"],"names":["baseUrl","headers","Auth","_baseUrl","_headers","res","ok","json","Promise","reject","status","data","fetch","method","body","JSON","stringify","then","_getResponseData","auth"],"mappings":"meAAA,OAASA,OAAT,CAAkBC,OAAlB,KAAiC,SAAjC,C,GAEMC,CAAAA,I,yBACJ,mBAAkC,IAApBF,CAAAA,OAAoB,MAApBA,OAAoB,CAAXC,OAAW,MAAXA,OAAW,4BAChC,KAAKE,QAAL,CAAgBH,OAAhB,CACA,KAAKI,QAAL,CAAgBH,OAAhB,CACD,C,2EAEgBI,G,CAAK,CACpB,MAAOA,CAAAA,GAAG,CAACC,EAAJ,CAASD,GAAG,CAACE,IAAJ,EAAT,CAAsBC,OAAO,CAACC,MAAR,kBAAyBJ,GAAG,CAACK,MAA7B,EAA7B,CACD,CAED;kDACaC,I,CAAM,CACjB,MAAOC,CAAAA,KAAK,WAAI,KAAKT,QAAT,YAA4B,CACtCU,MAAM,CAAE,MAD8B,CAEtCZ,OAAO,CAAE,KAAKG,QAFwB,CAGtCU,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeL,IAAf,CAHgC,CAA5B,CAAL,CAIJM,IAJI,CAIC,KAAKC,gBAJN,CAAP,CAKD,CAED;8CACWP,I,CAAM,CACf,MAAOC,CAAAA,KAAK,WAAI,KAAKT,QAAT,YAA4B,CACtCU,MAAM,CAAE,MAD8B,CAEtCZ,OAAO,CAAE,KAAKG,QAFwB,CAGtCU,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeL,IAAf,CAHgC,CAA5B,CAAL,CAIJM,IAJI,CAIC,KAAKC,gBAJN,CAAP,CAKD,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;mDACe,CACb,MAAON,CAAAA,KAAK,WAAI,KAAKT,QAAT,cAA8B,CACxCF,OAAO,kBACF,KAAKG,QADH,CADiC,CAA9B,CAAL,CAIJa,IAJI,CAIC,KAAKC,gBAJN,CAAP,CAKD,C,oBAGH,GAAMC,CAAAA,IAAI,CAAG,GAAIjB,CAAAA,IAAJ,CAAS,CACpBF,OAAO,CAAPA,OADoB,CAEpBC,OAAO,CAAPA,OAFoB,CAAT,CAAb,CAKA,cAAekB,CAAAA,IAAf","sourcesContent":["import { baseUrl, headers } from \"./utils\";\n\nclass Auth {\n  constructor({ baseUrl, headers }) {\n    this._baseUrl = baseUrl;\n    this._headers = headers;\n  }\n\n  _getResponseData(res) {\n    return res.ok ? res.json() : Promise.reject(`Error: ${res.status}`);\n  }\n\n  //Register user\n  registerUser(data) {\n    return fetch(`${this._baseUrl}/signup`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify(data),\n    }).then(this._getResponseData);\n  }\n\n  //Sign in user\n  signInUser(data) {\n    return fetch(`${this._baseUrl}/signin`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify(data),\n    }).then(this._getResponseData);\n  }\n\n  //Sign out user\n  // signOutUser() {\n  //   return fetch(`${this._baseUrl}/signout`, {\n  //     method: \"DELETE\",\n  //     headers: this._headers,\n  //   }).then(this._getResponseData);\n  // }\n\n  //Check token and get user email\n  validateUser() {\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: {\n        ...this._headers,\n      },\n    }).then(this._getResponseData);\n  }\n}\n\nconst auth = new Auth({\n  baseUrl,\n  headers,\n});\n\nexport default auth;\n"]},"metadata":{},"sourceType":"module"}