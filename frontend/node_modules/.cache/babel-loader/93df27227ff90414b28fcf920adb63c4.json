{"ast":null,"code":"import _toConsumableArray from\"/Users/Marina/Yandex Practicum/around-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/Marina/Yandex Practicum/around-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/Marina/Yandex Practicum/around-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import Header from\"./Header\";import Main from\"./Main\";import Footer from\"./Footer\";import PopupWithImage from\"./PopupWithImage\";import api from\"../utils/Api\";import{CurrentUserContext}from\"../contexts/CurrentUserContext\";import EditProfilePopup from\"./EditProfilePopup\";import EditAvatarPopup from\"./EditAvatarPopup\";import AddPlacePopup from\"./AddPlacePopup\";function App(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isEditProfilePopupOpen=_React$useState2[0],setIsEditProfilePopupOpen=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isAddPlacePopupOpen=_React$useState4[0],setIsAddPlacePopupOpen=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isEditAvatarPopupOpen=_React$useState6[0],setIsEditAvatarPopupOpen=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isImagePopupOpen=_React$useState8[0],setIsImagePopupOpen=_React$useState8[1];var _React$useState9=React.useState({}),_React$useState10=_slicedToArray(_React$useState9,2),selectedCard=_React$useState10[0],setSelectedCard=_React$useState10[1];var _React$useState11=React.useState({}),_React$useState12=_slicedToArray(_React$useState11,2),currentUser=_React$useState12[0],setCurrentUser=_React$useState12[1];var _React$useState13=React.useState([]),_React$useState14=_slicedToArray(_React$useState13,2),cards=_React$useState14[0],setCards=_React$useState14[1];React.useEffect(function(){api.getAppInfo().then(function(_ref){var _ref2=_slicedToArray(_ref,2),cardListData=_ref2[0],userInfoData=_ref2[1];setCurrentUser(userInfoData);setCards(cardListData);}).catch(function(error){console.log(error);});},[]);var handleEditAvatarClick=function handleEditAvatarClick(){setIsEditAvatarPopupOpen(true);};var handleEditProfileClick=function handleEditProfileClick(){setIsEditProfilePopupOpen(true);};var handleAddPlaceClick=function handleAddPlaceClick(){setIsAddPlacePopupOpen(true);};var handleUpdateUser=function handleUpdateUser(_ref3){var name=_ref3.name,description=_ref3.description;api.setUserInfo({currentUser:currentUser,name:name,about:description}).then(function(res){setCurrentUser(_objectSpread(_objectSpread({},currentUser),{},{name:res.name,about:res.about}));closeAllPopups();}).catch(function(error){console.log(error);});};var handleUpdateAvatar=function handleUpdateAvatar(_ref4){var avatar=_ref4.avatar;api.setUserAvatar({avatar:avatar}).then(function(res){setCurrentUser(_objectSpread(_objectSpread({},currentUser),{},{avatar:res.avatar}));closeAllPopups();}).catch(function(error){console.log(error);});};var handleAddPlaceSubmit=function handleAddPlaceSubmit(_ref5){var name=_ref5.name,link=_ref5.link;api.addCard({name:name,link:link}).then(function(newCard){setCards([].concat(_toConsumableArray(cards),[newCard]));closeAllPopups();}).catch(function(error){console.log(error);});};var handleCardLike=function handleCardLike(card){var isLiked=card.likes.some(function(c){return c._id===currentUser._id;});api.changeLikeCardStatus(card._id,isLiked?\"DELETE\":\"PUT\").then(function(newCard){var newCards=cards.map(function(c){return c._id===card._id?newCard:c;});setCards(newCards);});};var handleCardDelete=function handleCardDelete(card){api.removeCard(card._id).then(function(res){var newCards=cards.filter(function(c){return c._id!==card._id;});setCards(newCards);});};var handleCardClick=function handleCardClick(card){setIsImagePopupOpen(true);setSelectedCard(card);};var closeAllPopups=function closeAllPopups(){setIsEditAvatarPopupOpen(false);setIsEditProfilePopupOpen(false);setIsAddPlacePopupOpen(false);setIsImagePopupOpen(false);setSelectedCard({});};return/*#__PURE__*/React.createElement(CurrentUserContext.Provider,{value:currentUser},/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(Main,{cards:cards,onCardClick:handleCardClick,onCardDelete:handleCardDelete,onCardLike:handleCardLike,onEditProfile:handleEditProfileClick,onEditAvatar:handleEditAvatarClick,onAddPlace:handleAddPlaceClick}),/*#__PURE__*/React.createElement(Footer,null),/*#__PURE__*/React.createElement(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/React.createElement(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/React.createElement(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/React.createElement(PopupWithImage,{card:selectedCard,isOpen:isImagePopupOpen,onClose:closeAllPopups}));}export default App;","map":{"version":3,"sources":["/Users/Marina/Yandex Practicum/around-react/src/components/App.js"],"names":["React","Header","Main","Footer","PopupWithImage","api","CurrentUserContext","EditProfilePopup","EditAvatarPopup","AddPlacePopup","App","useState","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isImagePopupOpen","setIsImagePopupOpen","selectedCard","setSelectedCard","currentUser","setCurrentUser","cards","setCards","useEffect","getAppInfo","then","cardListData","userInfoData","catch","error","console","log","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","handleUpdateUser","name","description","setUserInfo","about","res","closeAllPopups","handleUpdateAvatar","avatar","setUserAvatar","handleAddPlaceSubmit","link","addCard","newCard","handleCardLike","card","isLiked","likes","some","c","_id","changeLikeCardStatus","newCards","map","handleCardDelete","removeCard","filter","handleCardClick"],"mappings":"6eAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,GAAP,KAAgB,cAAhB,CACA,OAASC,kBAAT,KAAmC,gCAAnC,CACA,MAAOC,CAAAA,gBAAP,KAA6B,oBAA7B,CACA,MAAOC,CAAAA,eAAP,KAA4B,mBAA5B,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CAEA,QAASC,CAAAA,GAAT,EAAe,qBAC+CV,KAAK,CAACW,QAAN,CAC1D,KAD0D,CAD/C,oDACNC,sBADM,qBACkBC,yBADlB,0CAIyCb,KAAK,CAACW,QAAN,CAAe,KAAf,CAJzC,qDAING,mBAJM,qBAIeC,sBAJf,0CAK6Cf,KAAK,CAACW,QAAN,CACxD,KADwD,CAL7C,qDAKNK,qBALM,qBAKiBC,wBALjB,0CAQmCjB,KAAK,CAACW,QAAN,CAAe,KAAf,CARnC,qDAQNO,gBARM,qBAQYC,mBARZ,0CAS2BnB,KAAK,CAACW,QAAN,CAAe,EAAf,CAT3B,sDASNS,YATM,sBASQC,eATR,4CAUyBrB,KAAK,CAACW,QAAN,CAAe,EAAf,CAVzB,uDAUNW,WAVM,sBAUOC,cAVP,4CAWavB,KAAK,CAACW,QAAN,CAAe,EAAf,CAXb,uDAWNa,KAXM,sBAWCC,QAXD,sBAabzB,KAAK,CAAC0B,SAAN,CAAgB,UAAM,CACpBrB,GAAG,CACAsB,UADH,GAEGC,IAFH,CAEQ,cAAkC,kCAAhCC,YAAgC,UAAlBC,YAAkB,UACtCP,cAAc,CAACO,YAAD,CAAd,CACAL,QAAQ,CAACI,YAAD,CAAR,CACD,CALH,EAMGE,KANH,CAMS,SAACC,KAAD,CAAW,CAChBC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CARH,EASD,CAVD,CAUG,EAVH,EAYA,GAAMG,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,EAAM,CAClClB,wBAAwB,CAAC,IAAD,CAAxB,CACD,CAFD,CAGA,GAAMmB,CAAAA,sBAAsB,CAAG,QAAzBA,CAAAA,sBAAyB,EAAM,CACnCvB,yBAAyB,CAAC,IAAD,CAAzB,CACD,CAFD,CAGA,GAAMwB,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,EAAM,CAChCtB,sBAAsB,CAAC,IAAD,CAAtB,CACD,CAFD,CAGA,GAAMuB,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,OAA2B,IAAxBC,CAAAA,IAAwB,OAAxBA,IAAwB,CAAlBC,WAAkB,OAAlBA,WAAkB,CAClDnC,GAAG,CACAoC,WADH,CACe,CAAEnB,WAAW,CAAXA,WAAF,CAAeiB,IAAI,CAAEA,IAArB,CAA2BG,KAAK,CAAEF,WAAlC,CADf,EAEGZ,IAFH,CAEQ,SAACe,GAAD,CAAS,CACbpB,cAAc,gCACTD,WADS,MAEZiB,IAAI,CAAEI,GAAG,CAACJ,IAFE,CAGZG,KAAK,CAAEC,GAAG,CAACD,KAHC,GAAd,CAKAE,cAAc,GACf,CATH,EAUGb,KAVH,CAUS,SAACC,KAAD,CAAW,CAChBC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CAZH,EAaD,CAdD,CAeA,GAAMa,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,OAAgB,IAAbC,CAAAA,MAAa,OAAbA,MAAa,CACzCzC,GAAG,CACA0C,aADH,CACiB,CAAED,MAAM,CAANA,MAAF,CADjB,EAEGlB,IAFH,CAEQ,SAACe,GAAD,CAAS,CACbpB,cAAc,gCACTD,WADS,MAEZwB,MAAM,CAAEH,GAAG,CAACG,MAFA,GAAd,CAIAF,cAAc,GACf,CARH,EASGb,KATH,CASS,SAACC,KAAD,CAAW,CAChBC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CAXH,EAYD,CAbD,CAeA,GAAMgB,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,OAAoB,IAAjBT,CAAAA,IAAiB,OAAjBA,IAAiB,CAAXU,IAAW,OAAXA,IAAW,CAC/C5C,GAAG,CACA6C,OADH,CACW,CAAEX,IAAI,CAAJA,IAAF,CAAQU,IAAI,CAAJA,IAAR,CADX,EAEGrB,IAFH,CAEQ,SAACuB,OAAD,CAAa,CACjB1B,QAAQ,8BAAKD,KAAL,GAAY2B,OAAZ,GAAR,CACAP,cAAc,GACf,CALH,EAMGb,KANH,CAMS,SAACC,KAAD,CAAW,CAChBC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CARH,EASD,CAVD,CAYA,GAAMoB,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,IAAD,CAAU,CAC/B,GAAMC,CAAAA,OAAO,CAAGD,IAAI,CAACE,KAAL,CAAWC,IAAX,CAAgB,SAACC,CAAD,QAAOA,CAAAA,CAAC,CAACC,GAAF,GAAUpC,WAAW,CAACoC,GAA7B,EAAhB,CAAhB,CACArD,GAAG,CACAsD,oBADH,CACwBN,IAAI,CAACK,GAD7B,CACkCJ,OAAO,CAAG,QAAH,CAAc,KADvD,EAEG1B,IAFH,CAEQ,SAACuB,OAAD,CAAa,CACjB,GAAMS,CAAAA,QAAQ,CAAGpC,KAAK,CAACqC,GAAN,CAAU,SAACJ,CAAD,QAAQA,CAAAA,CAAC,CAACC,GAAF,GAAUL,IAAI,CAACK,GAAf,CAAqBP,OAArB,CAA+BM,CAAvC,EAAV,CAAjB,CACAhC,QAAQ,CAACmC,QAAD,CAAR,CACD,CALH,EAMD,CARD,CASA,GAAME,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACT,IAAD,CAAU,CACjChD,GAAG,CAAC0D,UAAJ,CAAeV,IAAI,CAACK,GAApB,EAAyB9B,IAAzB,CAA8B,SAACe,GAAD,CAAS,CACrC,GAAMiB,CAAAA,QAAQ,CAAGpC,KAAK,CAACwC,MAAN,CAAa,SAACP,CAAD,QAAOA,CAAAA,CAAC,CAACC,GAAF,GAAUL,IAAI,CAACK,GAAtB,EAAb,CAAjB,CACAjC,QAAQ,CAACmC,QAAD,CAAR,CACD,CAHD,EAID,CALD,CAMA,GAAMK,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACZ,IAAD,CAAU,CAChClC,mBAAmB,CAAC,IAAD,CAAnB,CACAE,eAAe,CAACgC,IAAD,CAAf,CACD,CAHD,CAKA,GAAMT,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAC3B3B,wBAAwB,CAAC,KAAD,CAAxB,CACAJ,yBAAyB,CAAC,KAAD,CAAzB,CACAE,sBAAsB,CAAC,KAAD,CAAtB,CACAI,mBAAmB,CAAC,KAAD,CAAnB,CACAE,eAAe,CAAC,EAAD,CAAf,CACD,CAND,CAQA,mBACE,oBAAC,kBAAD,CAAoB,QAApB,EAA6B,KAAK,CAAEC,WAApC,eACE,oBAAC,MAAD,MADF,cAEE,oBAAC,IAAD,EACE,KAAK,CAAEE,KADT,CAEE,WAAW,CAAEyC,eAFf,CAGE,YAAY,CAAEH,gBAHhB,CAIE,UAAU,CAAEV,cAJd,CAKE,aAAa,CAAEhB,sBALjB,CAME,YAAY,CAAED,qBANhB,CAOE,UAAU,CAAEE,mBAPd,EAFF,cAWE,oBAAC,MAAD,MAXF,cAYE,oBAAC,gBAAD,EACE,MAAM,CAAEzB,sBADV,CAEE,OAAO,CAAEgC,cAFX,CAGE,YAAY,CAAEN,gBAHhB,EAZF,cAiBE,oBAAC,eAAD,EACE,MAAM,CAAEtB,qBADV,CAEE,OAAO,CAAE4B,cAFX,CAGE,cAAc,CAAEC,kBAHlB,EAjBF,cAsBE,oBAAC,aAAD,EACE,MAAM,CAAE/B,mBADV,CAEE,OAAO,CAAE8B,cAFX,CAGE,UAAU,CAAEI,oBAHd,EAtBF,cA2BE,oBAAC,cAAD,EACE,IAAI,CAAE5B,YADR,CAEE,MAAM,CAAEF,gBAFV,CAGE,OAAO,CAAE0B,cAHX,EA3BF,CADF,CAmCD,CAED,cAAelC,CAAAA,GAAf","sourcesContent":["import React from \"react\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport PopupWithImage from \"./PopupWithImage\";\nimport api from \"../utils/Api\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(\n    false\n  );\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(\n    false\n  );\n  const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n\n  React.useEffect(() => {\n    api\n      .getAppInfo()\n      .then(([cardListData, userInfoData]) => {\n        setCurrentUser(userInfoData);\n        setCards(cardListData);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }, []);\n\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(true);\n  };\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true);\n  };\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(true);\n  };\n  const handleUpdateUser = ({ name, description }) => {\n    api\n      .setUserInfo({ currentUser, name: name, about: description })\n      .then((res) => {\n        setCurrentUser({\n          ...currentUser,\n          name: res.name,\n          about: res.about,\n        });\n        closeAllPopups();\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n  const handleUpdateAvatar = ({ avatar }) => {\n    api\n      .setUserAvatar({ avatar })\n      .then((res) => {\n        setCurrentUser({\n          ...currentUser,\n          avatar: res.avatar,\n        });\n        closeAllPopups();\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  const handleAddPlaceSubmit = ({ name, link }) => {\n    api\n      .addCard({ name, link })\n      .then((newCard) => {\n        setCards([...cards, newCard]);\n        closeAllPopups();\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  const handleCardLike = (card) => {\n    const isLiked = card.likes.some((c) => c._id === currentUser._id);\n    api\n      .changeLikeCardStatus(card._id, isLiked ? \"DELETE\" : \"PUT\")\n      .then((newCard) => {\n        const newCards = cards.map((c) => (c._id === card._id ? newCard : c));\n        setCards(newCards);\n      });\n  };\n  const handleCardDelete = (card) => {\n    api.removeCard(card._id).then((res) => {\n      const newCards = cards.filter((c) => c._id !== card._id);\n      setCards(newCards);\n    });\n  };\n  const handleCardClick = (card) => {\n    setIsImagePopupOpen(true);\n    setSelectedCard(card);\n  };\n\n  const closeAllPopups = () => {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsImagePopupOpen(false);\n    setSelectedCard({});\n  };\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <Header />\n      <Main\n        cards={cards}\n        onCardClick={handleCardClick}\n        onCardDelete={handleCardDelete}\n        onCardLike={handleCardLike}\n        onEditProfile={handleEditProfileClick}\n        onEditAvatar={handleEditAvatarClick}\n        onAddPlace={handleAddPlaceClick}\n      />\n      <Footer />\n      <EditProfilePopup\n        isOpen={isEditProfilePopupOpen}\n        onClose={closeAllPopups}\n        onUpdateUser={handleUpdateUser}\n      />\n      <EditAvatarPopup\n        isOpen={isEditAvatarPopupOpen}\n        onClose={closeAllPopups}\n        onUpdateAvatar={handleUpdateAvatar}\n      />\n      <AddPlacePopup\n        isOpen={isAddPlacePopupOpen}\n        onClose={closeAllPopups}\n        onAddPlace={handleAddPlaceSubmit}\n      />\n      <PopupWithImage\n        card={selectedCard}\n        isOpen={isImagePopupOpen}\n        onClose={closeAllPopups}\n      />\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}