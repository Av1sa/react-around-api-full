{"version":3,"sources":["contexts/CurrentUserContext.js","images/logo.svg","components/Header.js","components/ProtectedRoute.js","images/edit_large_icon.svg","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithImage.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Login.js","components/Register.js","images/success_tooltip.svg","images/error_tooltip.svg","components/InfoTooltip.js","utils/api.js","utils/auth.js","components/App.js","index.js"],"names":["CurrentUserContext","React","createContext","Header","email","loggedIn","onSignOut","location","useLocation","className","src","logo","alt","onClick","to","pathname","ProtectedRoute","Component","component","props","Card","card","onCardDelete","onCardClick","onCardLike","currentUser","useContext","name","link","likes","owner","isOwn","_id","isLiked","some","item","length","Main","cards","onEditProfile","onEditAvatar","onAddPlace","about","avatar","editIconLarge","map","Footer","PopupWithImage","onClose","isOpen","PopupWithForm","title","buttonText","children","onSubmit","noValidate","type","EditProfilePopup","onUpdateUser","useState","setName","setAbout","useEffect","e","preventDefault","placeholder","minLength","maxLength","pattern","required","id","value","onChange","target","EditAvatarPopup","onUpdateAvatar","avatarRef","useRef","ref","current","AddPlacePopup","nameRef","linkRef","Login","onLogin","setEmail","password","setPassword","Register","onRegister","InfoTooltip","text","imgSuccess","imgError","api","baseUrl","headers","this","res","ok","json","Promise","reject","status","token","fetch","Authorization","then","_getResponseData","method","body","JSON","stringify","cardId","all","getInitialCards","getUserInfo","auth","data","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isImagePopupOpen","setIsImagePopupOpen","isSuccessTooltipOpen","setIsSuccessTooltipOpen","isErrorTooltipOpen","setIsErrorTooltipOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","setLoggedIn","setToken","history","useHistory","localStorage","getItem","validateAndSetUser","validateUser","user","cardListData","catch","err","console","log","push","openSuccessTooltip","openErrorTooltip","closeAllPopups","Provider","removeItem","exact","path","removeCard","newCards","filter","c","changeLikeCardStatus","newCard","signInUser","setItem","registerUser","setUserInfo","setUserAvatar","addCard","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1c43bbc8.chunk.js","sourcesContent":["import React from 'react';\nexport const CurrentUserContext = React.createContext();\n","export default __webpack_public_path__ + \"static/media/logo.4e8e0a1d.svg\";","import React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport logo from '../images/logo.svg';\n\nfunction Header({ email, loggedIn, onSignOut }) {\n  const location = useLocation();\n  return (\n    <header className=\"header\">\n      <img src={logo} alt=\"Logo\" className=\"header__logo\" />\n      {loggedIn ? (\n        <ul className=\"header__menu-items\">\n          <li className=\"header__menu-item header__nav-text_email\">{email}</li>\n          <li className=\"header__menu-item header__nav-text\">\n            <button\n              className=\"header__nav-text header__nav-text_muted\"\n              onClick={onSignOut}\n            >\n              Log out\n            </button>\n          </li>\n        </ul>\n      ) : (\n        <Link\n          className=\"header__nav-text\"\n          to={location.pathname === '/signin' ? '/signup' : '/signin'}\n        >\n          {location.pathname === '/signin' ? 'Sign up' : 'Sign in'}\n        </Link>\n      )}\n    </header>\n  );\n}\n\nexport default Header;\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\n\nfunction ProtectedRoute({ component: Component, ...props }) {\n  return (\n    <Route>\n      {() =>\n        props.loggedIn ? <Component {...props} /> : <Redirect to=\"/signin\" />\n      }\n    </Route>\n  );\n}\n\nexport default ProtectedRoute;\n","export default __webpack_public_path__ + \"static/media/edit_large_icon.a086f758.svg\";","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Card({ card, onCardDelete, onCardClick, onCardLike }) {\n  const currentUser = React.useContext(CurrentUserContext);\n  const { name, link, likes, owner } = card;\n  const isOwn = currentUser._id === owner;\n  const isLiked = likes.some((item) => item === currentUser._id);\n\n  const handleLikeClick = () => {\n    onCardLike(card);\n  };\n\n  function handleClick() {\n    onCardClick(card);\n  }\n\n  function handleDeleteClick() {\n    onCardDelete(card);\n  }\n\n  return (\n    <li className=\"card\">\n      <img\n        className=\"card__image\"\n        alt={`Pic: ${name}`}\n        src={link}\n        onClick={handleClick}\n      />\n      <div className=\"card__text-container\">\n        <p className=\"card__text\">{name}</p>\n        <div className=\"card__likes-container\">\n          <button\n            className={`button button_like ${isLiked && 'button_like-black'}`}\n            onClick={handleLikeClick}\n          />\n          <p className=\"card__likes-text\">{likes.length}</p>\n        </div>\n      </div>\n      {isOwn && (\n        <button className=\"button button_delete\" onClick={handleDeleteClick} />\n      )}\n    </li>\n  );\n}\n\nexport default Card;\n","import React from 'react';\nimport editIconLarge from '../images/edit_large_icon.svg';\nimport Card from '../components/Card';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Main({\n  cards,\n  onCardLike,\n  onCardDelete,\n  onCardClick,\n  onEditProfile,\n  onEditAvatar,\n  onAddPlace,\n}) {\n  const currentUser = React.useContext(CurrentUserContext);\n  const { name, about, avatar } = currentUser;\n\n  return (\n    <main>\n      <section className=\"profile\">\n        <div className=\"profile__avatar-container\">\n          <img alt=\"Avatar Pic\" className=\"profile__avatar\" src={avatar} />\n          <div className=\"profile__avatar-edit\" onClick={onEditAvatar}>\n            <img src={editIconLarge} alt=\"\" />\n          </div>\n        </div>\n        <div className=\"profile__text-container\">\n          <h1 className=\"profile__name\">{name}</h1>\n          <button\n            className=\"button button_edit\"\n            onClick={onEditProfile}\n          ></button>\n          <p className=\"profile__description\">{about}</p>\n        </div>\n        <button className=\"button button_add\" onClick={onAddPlace}></button>\n      </section>\n\n      <section className=\"elements\">\n        <ul className=\"cards\">\n          {cards.map((card) => (\n            <Card\n              card={card}\n              onCardDelete={onCardDelete}\n              onCardClick={onCardClick}\n              onCardLike={onCardLike}\n              key={card._id}\n            />\n          ))}\n        </ul>\n      </section>\n    </main>\n  );\n}\n\nexport default Main;\n","import React from 'react';\n\nfunction Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__text\">© 2020 Around The U.S.</p>\n    </footer>\n  );\n}\n\nexport default Footer;\n","import React from 'react';\n\nfunction PopupWithImage({ card, onClose, isOpen }) {\n  const { name, link } = card;\n  return (\n    <div className={`popup popup_image ${isOpen && 'popup_is-opened'}`}>\n      <div className=\"popup__container\">\n        <img className=\"popup__image\" alt={name} src={link} />\n        <h2 className=\"popup__image-title\">{name}</h2>\n        <button className=\"button button_close\" onClick={onClose} />\n      </div>\n    </div>\n  );\n}\n\nexport default PopupWithImage;\n","import React from 'react';\n\nfunction PopupWithForm({\n  name,\n  title,\n  buttonText,\n  children,\n  isOpen,\n  onClose,\n  onSubmit,\n}) {\n  return (\n    <div className={`popup popup_type_${name} ${isOpen && 'popup_is-opened'}`}>\n      <div className=\"popup__container popup__container_form\">\n        <form\n          className=\"popup__form\"\n          name={name}\n          onSubmit={onSubmit}\n          noValidate\n        >\n          <h2 className=\"popup__title\">{title}</h2>\n          {children}\n          <button type=\"submit\" className=\"button button_save popup__input\">\n            {buttonText}\n          </button>\n        </form>\n        <button className=\"button button_close\" onClick={onClose}></button>\n      </div>\n    </div>\n  );\n}\n\nexport default PopupWithForm;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const [name, setName] = React.useState('');\n  const [about, setAbout] = React.useState('');\n\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setAbout(currentUser.about);\n  }, [currentUser]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onUpdateUser({ name, about });\n  };\n\n  const editProfileChildren = () => {\n    return (\n      <>\n        <label className=\"popup__field\">\n          <input\n            type=\"text\"\n            className=\"popup__input popup__input_name\"\n            placeholder=\"Edit Name\"\n            minLength=\"2\"\n            maxLength=\"40\"\n            pattern=\"[A-Za-z -]+\"\n            required\n            id=\"name-input\"\n            value={name || ''}\n            onChange={(e) => setName(e.target.value)}\n          />\n          <span id=\"name-input-error\" className=\"popup__input-error\"></span>\n        </label>\n        <label className=\"popup__field\">\n          <input\n            type=\"text\"\n            className=\"popup__input popup__input_desc\"\n            placeholder=\"Edit Job\"\n            minLength=\"2\"\n            maxLength=\"200\"\n            required\n            id=\"desc-input\"\n            value={about || ''}\n            onChange={(e) => setAbout(e.target.value)}\n          />\n          <span className=\"popup__input-error\" id=\"desc-input-error\"></span>\n        </label>\n      </>\n    );\n  };\n\n  return (\n    <PopupWithForm\n      name=\"edit-profile\"\n      title=\"Edit Profile\"\n      buttonText=\"Save\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      children={editProfileChildren()}\n    />\n  );\n}\n\nexport default EditProfilePopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar }) {\n  const avatarRef = React.useRef();\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onUpdateAvatar({ avatar: avatarRef.current.value });\n  };\n\n  const editAvatarChildren = () => {\n    return (\n      <>\n        <label className=\"popup__field\">\n          <input\n            type=\"url\"\n            className=\"popup__input popup__input_avatar\"\n            placeholder=\"Avatar Link\"\n            required\n            id=\"avatar-input\"\n            ref={avatarRef}\n          />\n          <span id=\"avatar-input-error\" className=\"popup__input-error\"></span>\n        </label>\n      </>\n    );\n  };\n  return (\n    <PopupWithForm\n      name=\"edit-avatar\"\n      title=\"Change Profile Picture\"\n      buttonText=\"Save\"\n      isOpen={isOpen}\n      onClose={onClose}\n      children={editAvatarChildren()}\n      onSubmit={handleSubmit}\n    />\n  );\n}\n\nexport default EditAvatarPopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace }) {\n  const nameRef = React.useRef();\n  const linkRef = React.useRef();\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onAddPlace({ name: nameRef.current.value, link: linkRef.current.value });\n  };\n\n  const addPlaceChildren = () => {\n    return (\n      <>\n        <label className=\"popup__field\">\n          <input\n            type=\"text\"\n            className=\"popup__input popup__input_name\"\n            placeholder=\"Title\"\n            minLength=\"1\"\n            maxLength=\"30\"\n            required\n            id=\"title-input\"\n            ref={nameRef}\n          />\n          <span className=\"popup__input-error\" id=\"title-input-error\"></span>\n        </label>\n        <label className=\"popup__field\">\n          <input\n            type=\"url\"\n            className=\"popup__input popup__input_link\"\n            placeholder=\"Image Link\"\n            required\n            id=\"link-input\"\n            ref={linkRef}\n          />\n          <span className=\"popup__input-error\" id=\"link-input-error\"></span>\n        </label>\n      </>\n    );\n  };\n  return (\n    <PopupWithForm\n      name=\"new-place\"\n      title=\"New Place\"\n      buttonText=\"Save\"\n      isOpen={isOpen}\n      onClose={onClose}\n      children={addPlaceChildren()}\n      onSubmit={handleSubmit}\n    />\n  );\n}\n\nexport default AddPlacePopup;\n","import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction Login({ onLogin }) {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onLogin({ email, password });\n  };\n  return (\n    <div className=\"form\">\n      <form className=\"form__container\" onSubmit={handleSubmit}>\n        <h1 className=\"form__title\">Log in</h1>\n        <input\n          className=\"form__input\"\n          type=\"email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          placeholder=\"Email\"\n        />\n        <input\n          className=\"form__input\"\n          type=\"password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          placeholder=\"Password\"\n        />\n        <button type=\"submit\" className=\"form__submit\">\n          Log in\n        </button>\n        <Link className=\"form__link\" to=\"/signup\">\n          Not a member yet? Sign up here!\n        </Link>\n      </form>\n    </div>\n  );\n}\n\nexport default Login;\n","import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction Register({ onRegister }) {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onRegister({ email, password });\n  };\n\n  return (\n    <div className=\"form\" onSubmit={handleSubmit}>\n      <form className=\"form__container\">\n        <h1 className=\"form__title\">Sign up</h1>\n        <input\n          className=\"form__input\"\n          type=\"email\"\n          value={email}\n          placeholder=\"Email\"\n          onChange={(e) => setEmail(e.target.value)}\n        />\n        <input\n          className=\"form__input\"\n          type=\"password\"\n          placeholder=\"Password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n        <button type=\"submit\" className=\"form__submit\">\n          Sign up\n        </button>\n        <Link className=\"form__link\" to=\"/signin\">\n          Already a member? Log in here!\n        </Link>\n      </form>\n    </div>\n  );\n}\n\nexport default Register;\n","export default __webpack_public_path__ + \"static/media/success_tooltip.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/error_tooltip.df8eddf6.svg\";","import React from 'react';\nimport imgSuccess from '../images/success_tooltip.svg';\nimport imgError from '../images/error_tooltip.svg';\n\nfunction InfoTooltip({ isOpen, onClose, type }) {\n  let src, alt, text;\n  switch (type) {\n    case 'success':\n      src = imgSuccess;\n      alt = 'Pic: success';\n      text = 'Success! You have now been registered.';\n      break;\n    default:\n      src = imgError;\n      alt = 'Pic: error';\n      text = 'Oops, something went wrong! Please try again.';\n  }\n  return (\n    <div className={`popup ${isOpen && 'popup_is-opened'}`}>\n      <div className=\"popup__container popup__container_form popup__container_tooltip\">\n        <img src={src} alt={alt} />\n        <p className=\"popup__text\">{text}</p>\n        <button className=\"button button_close\" onClick={onClose}></button>\n      </div>\n    </div>\n  );\n}\n\nexport default InfoTooltip;\n","class Api {\n  constructor({ baseUrl, headers }) {\n    this.baseUrl = baseUrl;\n    this.headers = headers;\n  }\n\n  _getResponseData(res) {\n    return res.ok ? res.json() : Promise.reject(`Error: ${res.status}`);\n  }\n\n  //GET Get initial cards\n  getInitialCards(token) {\n    return fetch(`${this.baseUrl}/cards`, {\n      headers: {\n        ...this.headers,\n        Authorization: `Bearer ${token}`,\n      },\n    }).then((res) => this._getResponseData(res));\n  }\n\n  //GET Get user info\n  getUserInfo(token) {\n    return fetch(`${this.baseUrl}/users/me`, {\n      headers: {\n        ...this.headers,\n        Authorization: `Bearer ${token}`,\n      },\n    }).then((res) => this._getResponseData(res));\n  }\n\n  //PATCH Set user info\n  setUserInfo({ name, about, token }) {\n    return fetch(`${this.baseUrl}/users/me`, {\n      method: 'PATCH',\n      headers: {\n        ...this.headers,\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify({ name, about }),\n    }).then((res) => this._getResponseData(res));\n  }\n\n  //PATCH Set user avatar\n  setUserAvatar({ avatar, token }) {\n    return fetch(`${this.baseUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: {\n        ...this.headers,\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify({ avatar }),\n    }).then((res) => this._getResponseData(res));\n  }\n\n  //POST Add new place\n  addCard({ name, link, token }) {\n    return fetch(`${this.baseUrl}/cards`, {\n      headers: {\n        ...this.headers,\n        Authorization: `Bearer ${token}`,\n      },\n      method: 'POST',\n      body: JSON.stringify({ name, link }),\n    }).then((res) => this._getResponseData(res));\n  }\n\n  //DELETE Remove place\n  removeCard(cardId, token) {\n    return fetch(`${this.baseUrl}/cards/${cardId}`, {\n      headers: {\n        ...this.headers,\n        Authorization: `Bearer ${token}`,\n      },\n      method: 'DELETE',\n    }).then((res) => this._getResponseData(res));\n  }\n\n  //PUT/DELETE Change Like status\n  changeLikeCardStatus(cardId, method, token) {\n    return fetch(`${this.baseUrl}/cards/${cardId}/likes/`, {\n      headers: {\n        ...this.headers,\n        Authorization: `Bearer ${token}`,\n      },\n      method: method,\n    }).then((res) => this._getResponseData(res));\n  }\n\n  //Get initial data\n  getAppInfo(token) {\n    return Promise.all([this.getInitialCards(token), this.getUserInfo(token)]);\n  }\n}\n\nconst api = new Api({\n  baseUrl: 'https://api.mm15.students.nomoreparties.site',\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\nexport default api;\n","class Auth {\n  constructor({ baseUrl, headers }) {\n    this.baseUrl = baseUrl;\n    this.headers = headers;\n  }\n\n  _getResponseData(res) {\n    return res.ok ? res.json() : Promise.reject(`Error: ${res.status}`);\n  }\n\n  //Register user\n  registerUser(data) {\n    return fetch(`${this.baseUrl}/signup`, {\n      method: 'POST',\n      headers: this.headers,\n      body: JSON.stringify(data),\n    }).then(this._getResponseData);\n  }\n\n  //Sign in user\n  signInUser(data) {\n    return fetch(`${this.baseUrl}/signin`, {\n      method: 'POST',\n      headers: this.headers,\n      body: JSON.stringify(data),\n    }).then(this._getResponseData);\n  }\n\n  //Check token and get user email\n  validateUser(token) {\n    return fetch(`${this.baseUrl}/users/me`, {\n      headers: {\n        ...this.headers,\n        Authorization: `Bearer ${token}`,\n      },\n    }).then(this._getResponseData);\n  }\n}\n\nconst auth = new Auth({\n  baseUrl: 'https://api.mm15.students.nomoreparties.site',\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\nexport default auth;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route, Redirect, useHistory } from 'react-router-dom';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport Header from './Header';\nimport ProtectedRoute from './ProtectedRoute';\nimport Main from './Main';\nimport Footer from './Footer';\nimport PopupWithImage from './PopupWithImage';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport Login from './Login';\nimport Register from './Register';\nimport InfoTooltip from './InfoTooltip';\nimport api from '../utils/api';\nimport auth from '../utils/auth';\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = useState(false);\n  const [isSuccessTooltipOpen, setIsSuccessTooltipOpen] = useState(false);\n  const [isErrorTooltipOpen, setIsErrorTooltipOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState({});\n  const [currentUser, setCurrentUser] = useState({});\n  const [cards, setCards] = useState([]);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [email, setEmail] = useState('');\n  const [token, setToken] = useState('');\n  const history = useHistory();\n\n  useEffect(() => {\n    const token = localStorage.getItem('jwt');\n    if (token) {\n      setToken(token);\n      validateAndSetUser(token);\n    }\n    // eslint-disable-next-line\n  }, []);\n\n  //Validate, register, login\n  const validateAndSetUser = (token) => {\n    auth\n      .validateUser(token)\n      .then((user) => {\n        setCurrentUser(user);\n        setLoggedIn(true);\n        setEmail(user.email);\n        api\n          .getInitialCards(token)\n          .then((cardListData) => setCards(cardListData))\n          .catch((err) => console.log(err));\n        history.push('/');\n      })\n      .catch((err) => console.log(err));\n  };\n  const handleRegister = (data) => {\n    auth\n      .registerUser(data)\n      .then(() => {\n        openSuccessTooltip();\n        history.push('/signin');\n      })\n      .catch((err) => {\n        openErrorTooltip();\n        console.log(err);\n      });\n  };\n  const handleSignIn = (data) => {\n    auth\n      .signInUser(data)\n      .then(({ token }) => {\n        localStorage.setItem('jwt', token);\n        setToken(token);\n        validateAndSetUser(token);\n      })\n      .catch((err) => {\n        openErrorTooltip();\n        console.log(err);\n      });\n  };\n  const handleSignOut = () => {\n    localStorage.removeItem('jwt');\n    setToken('');\n    setLoggedIn(false);\n    setEmail('');\n    history.push('/signin');\n  };\n  const openSuccessTooltip = () => {\n    setIsSuccessTooltipOpen(true);\n  };\n  const openErrorTooltip = () => {\n    setIsErrorTooltipOpen(true);\n  };\n\n  //User\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(true);\n  };\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true);\n  };\n  const handleUpdateUser = ({ name, about }) => {\n    api\n      .setUserInfo({ name, about, token })\n      .then((res) => {\n        setCurrentUser({\n          ...currentUser,\n          name: res.name,\n          about: res.about,\n        });\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  };\n  const handleUpdateAvatar = ({ avatar }) => {\n    api\n      .setUserAvatar({ avatar, token })\n      .then((res) => {\n        setCurrentUser({\n          ...currentUser,\n          avatar: res.avatar,\n        });\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  };\n\n  //Cards\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(true);\n  };\n  const handleAddPlaceSubmit = ({ name, link }) => {\n    api\n      .addCard({ name, link, token })\n      .then((newCard) => {\n        setCards([...cards, newCard]);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  };\n  const handleCardLike = (card) => {\n    const isLiked = card.likes.some((c) => c === currentUser._id);\n    api\n      .changeLikeCardStatus(card._id, isLiked ? 'DELETE' : 'PUT', token)\n      .then((newCard) => {\n        const newCards = cards.map((c) => (c._id === card._id ? newCard : c));\n        setCards(newCards);\n      })\n      .catch((err) => console.log(err));\n  };\n  const handleCardDelete = (card) => {\n    api\n      .removeCard(card._id, token)\n      .then(() => {\n        const newCards = cards.filter((c) => c._id !== card._id);\n        setCards(newCards);\n      })\n      .catch((err) => console.log(err));\n  };\n  const handleCardClick = (card) => {\n    setIsImagePopupOpen(true);\n    setSelectedCard(card);\n  };\n\n  //Popups\n  const closeAllPopups = () => {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsImagePopupOpen(false);\n    setSelectedCard({});\n\n    setIsSuccessTooltipOpen(false);\n    setIsErrorTooltipOpen(false);\n  };\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <Header email={email} loggedIn={loggedIn} onSignOut={handleSignOut} />\n      <Switch>\n        <ProtectedRoute\n          component={Main}\n          exact\n          path=\"/\"\n          loggedIn={loggedIn}\n          cards={cards}\n          onCardClick={handleCardClick}\n          onCardDelete={handleCardDelete}\n          onCardLike={handleCardLike}\n          onEditProfile={handleEditProfileClick}\n          onEditAvatar={handleEditAvatarClick}\n          onAddPlace={handleAddPlaceClick}\n        />\n        <Route path=\"/signin\">\n          <Login onLogin={handleSignIn} />\n        </Route>\n        <Route path=\"/signup\">\n          <Register onRegister={handleRegister} />\n        </Route>\n        <Route>\n          <Redirect to={loggedIn ? '/' : '/signin'} />\n        </Route>\n      </Switch>\n      {loggedIn && <Footer />}\n      <EditProfilePopup\n        isOpen={isEditProfilePopupOpen}\n        onClose={closeAllPopups}\n        onUpdateUser={handleUpdateUser}\n      />\n      <EditAvatarPopup\n        isOpen={isEditAvatarPopupOpen}\n        onClose={closeAllPopups}\n        onUpdateAvatar={handleUpdateAvatar}\n      />\n      <AddPlacePopup\n        isOpen={isAddPlacePopupOpen}\n        onClose={closeAllPopups}\n        onAddPlace={handleAddPlaceSubmit}\n      />\n      <PopupWithImage\n        card={selectedCard}\n        isOpen={isImagePopupOpen}\n        onClose={closeAllPopups}\n      />\n      <InfoTooltip\n        type=\"success\"\n        isOpen={isSuccessTooltipOpen}\n        onClose={closeAllPopups}\n      />\n      <InfoTooltip\n        type=\"error\"\n        isOpen={isErrorTooltipOpen}\n        onClose={closeAllPopups}\n      />\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { HashRouter } from \"react-router-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\n\nReactDOM.render(\n  <HashRouter>\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>\n  </HashRouter>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}