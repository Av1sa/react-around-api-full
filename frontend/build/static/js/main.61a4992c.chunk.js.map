{"version":3,"sources":["images/logo.svg","images/edit_large_icon.svg","images/success_tooltip.svg","images/error_tooltip.svg","contexts/CurrentUserContext.js","components/Header.js","components/ProtectedRoute.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithImage.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Login.js","components/Register.js","components/InfoTooltip.js","utils/api.js","utils/auth.js","components/App.js","index.js"],"names":["module","exports","CurrentUserContext","React","createContext","Header","email","loggedIn","onSignOut","location","useLocation","className","src","logo","alt","onClick","to","pathname","ProtectedRoute","Component","component","props","Card","card","onCardDelete","onCardClick","onCardLike","currentUser","useContext","name","link","likes","owner","isOwn","_id","isLiked","some","item","length","Main","cards","onEditProfile","onEditAvatar","onAddPlace","about","avatar","editIconLarge","map","key","Footer","PopupWithImage","onClose","isOpen","PopupWithForm","title","buttonText","children","onSubmit","noValidate","type","EditProfilePopup","onUpdateUser","useState","setName","setAbout","useEffect","e","preventDefault","placeholder","minLength","maxLength","pattern","required","id","value","onChange","target","EditAvatarPopup","onUpdateAvatar","avatarRef","useRef","ref","current","AddPlacePopup","nameRef","linkRef","Login","onLogin","setEmail","password","setPassword","Register","onRegister","InfoTooltip","text","imgSuccess","imgError","api","baseUrl","headers","this","res","ok","json","Promise","reject","status","token","fetch","Authorization","then","_getResponseData","method","body","JSON","stringify","cardId","all","getInitialCards","getUserInfo","auth","data","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isImagePopupOpen","setIsImagePopupOpen","isSuccessTooltipOpen","setIsSuccessTooltipOpen","isErrorTooltipOpen","setIsErrorTooltipOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","setLoggedIn","setToken","history","useHistory","localStorage","getItem","validateAndSetUser","validateUser","user","cardListData","catch","err","console","log","push","openSuccessTooltip","openErrorTooltip","closeAllPopups","Provider","removeItem","exact","path","removeCard","newCards","filter","c","changeLikeCardStatus","newCard","signInUser","setItem","registerUser","setUserInfo","setUserAvatar","addCard","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.61a4992c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.8f7611ae.svg\";","module.exports = __webpack_public_path__ + \"static/media/edit_large_icon.d476a8b8.svg\";","module.exports = __webpack_public_path__ + \"static/media/success_tooltip.e38b395c.svg\";","module.exports = __webpack_public_path__ + \"static/media/error_tooltip.4072126c.svg\";","import React from \"react\";\nexport const CurrentUserContext = React.createContext();\n","import React from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport logo from \"../images/logo.svg\";\n\nfunction Header({ email, loggedIn, onSignOut }) {\n  const location = useLocation();\n  return (\n    <header className=\"header\">\n      <img src={logo} alt=\"Logo\" className=\"header__logo\" />\n      {loggedIn ? (\n        <ul className=\"header__menu-items\">\n          <li className=\"header__menu-item header__nav-text_email\">{email}</li>\n          <li className=\"header__menu-item header__nav-text\">\n            <button\n              className=\"header__nav-text header__nav-text_muted\"\n              onClick={onSignOut}\n            >\n              Log out\n            </button>\n          </li>\n        </ul>\n      ) : (\n        <Link\n          className=\"header__nav-text\"\n          to={location.pathname === \"/signin\" ? \"/signup\" : \"/signin\"}\n        >\n          {location.pathname === \"/signin\" ? \"Sign up\" : \"Sign in\"}\n        </Link>\n      )}\n    </header>\n  );\n}\n\nexport default Header;\n","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nfunction ProtectedRoute({ component: Component, ...props }) {\n  return (\n    <Route>\n      {() => (props.loggedIn ? <Component {...props}/> : <Redirect to=\"/signin\" />)}\n    </Route>\n  );\n}\n\nexport default ProtectedRoute;\n","import React from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction Card({ card, onCardDelete, onCardClick, onCardLike }) {\n  const currentUser = React.useContext(CurrentUserContext);\n  const { name, link, likes, owner } = card;\n  const isOwn = currentUser._id === owner;\n  const isLiked = likes.some((item) => item === currentUser._id);\n\n  const handleLikeClick = () => {\n    onCardLike(card);\n  };\n\n  function handleClick() {\n    onCardClick(card);\n  }\n\n  function handleDeleteClick() {\n    onCardDelete(card);\n  }\n\n  return (\n    <li className=\"card\">\n      <img\n        className=\"card__image\"\n        alt={`Pic: ${name}`}\n        src={link}\n        onClick={handleClick}\n      />\n      <div className=\"card__text-container\">\n        <p className=\"card__text\">{name}</p>\n        <div className=\"card__likes-container\">\n          <button\n            className={`button button_like ${isLiked && \"button_like-black\"}`}\n            onClick={handleLikeClick}\n          />\n          <p className=\"card__likes-text\">{likes.length}</p>\n        </div>\n      </div>\n      {isOwn && (\n        <button className=\"button button_delete\" onClick={handleDeleteClick} />\n      )}\n    </li>\n  );\n}\n\nexport default Card;\n","import React from \"react\";\nimport editIconLarge from \"../images/edit_large_icon.svg\";\nimport Card from \"../components/Card\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction Main({\n  cards,\n  onCardLike,\n  onCardDelete,\n  onCardClick,\n  onEditProfile,\n  onEditAvatar,\n  onAddPlace,\n}) {\n  const currentUser = React.useContext(CurrentUserContext);\n  const { name, about, avatar } = currentUser;\n\n  return (\n    <main>\n      <section className=\"profile\">\n        <div className=\"profile__avatar-container\">\n          <img alt=\"Avatar Pic\" className=\"profile__avatar\" src={avatar} />\n          <div className=\"profile__avatar-edit\" onClick={onEditAvatar}>\n            <img src={editIconLarge} alt=\"\" />\n          </div>\n        </div>\n        <div className=\"profile__text-container\">\n          <h1 className=\"profile__name\">{name}</h1>\n          <button\n            className=\"button button_edit\"\n            onClick={onEditProfile}\n          ></button>\n          <p className=\"profile__description\">{about}</p>\n        </div>\n        <button className=\"button button_add\" onClick={onAddPlace}></button>\n      </section>\n\n      <section className=\"elements\">\n        <ul className=\"cards\">\n          {cards.map((card) => (\n            <Card\n              card={card}\n              onCardDelete={onCardDelete}\n              onCardClick={onCardClick}\n              onCardLike={onCardLike}\n              key={card._id}\n            />\n          ))}\n        </ul>\n      </section>\n    </main>\n  );\n}\n\nexport default Main;\n","import React from \"react\";\n\nfunction Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__text\">© 2020 Around The U.S.</p>\n    </footer>\n  );\n}\n\nexport default Footer;\n","import React from \"react\";\n\nfunction PopupWithImage({ card, onClose, isOpen }) {\n  const { name, link } = card;\n  return (\n    <div className={`popup popup_image ${isOpen && \"popup_is-opened\"}`}>\n      <div className=\"popup__container\">\n        <img className=\"popup__image\" alt={name} src={link} />\n        <h2 className=\"popup__image-title\">{name}</h2>\n        <button className=\"button button_close\" onClick={onClose} />\n      </div>\n    </div>\n  );\n}\n\nexport default PopupWithImage;\n","import React from \"react\";\n\nfunction PopupWithForm({\n  name,\n  title,\n  buttonText,\n  children,\n  isOpen,\n  onClose,\n  onSubmit,\n}) {\n  return (\n    <div className={`popup popup_type_${name} ${isOpen && \"popup_is-opened\"}`}>\n      <div className=\"popup__container popup__container_form\">\n        <form\n          className=\"popup__form\"\n          name={name}\n          onSubmit={onSubmit}\n          noValidate\n        >\n          <h2 className=\"popup__title\">{title}</h2>\n          {children}\n          <button type=\"submit\" className=\"button button_save popup__input\">\n            {buttonText}\n          </button>\n        </form>\n        <button className=\"button button_close\" onClick={onClose}></button>\n      </div>\n    </div>\n  );\n}\n\nexport default PopupWithForm;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const [name, setName] = React.useState(\"\");\n  const [about, setAbout] = React.useState(\"\");\n\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setAbout(currentUser.about);\n  }, [currentUser]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onUpdateUser({ name, about });\n  };\n\n  const editProfileChildren = () => {\n    return (\n      <>\n        <label className=\"popup__field\">\n          <input\n            type=\"text\"\n            className=\"popup__input popup__input_name\"\n            placeholder=\"Edit Name\"\n            minLength=\"2\"\n            maxLength=\"40\"\n            pattern=\"[A-Za-z -]+\"\n            required\n            id=\"name-input\"\n            value={name || \"\"}\n            onChange={(e) => setName(e.target.value)}\n          />\n          <span id=\"name-input-error\" className=\"popup__input-error\"></span>\n        </label>\n        <label className=\"popup__field\">\n          <input\n            type=\"text\"\n            className=\"popup__input popup__input_desc\"\n            placeholder=\"Edit Job\"\n            minLength=\"2\"\n            maxLength=\"200\"\n            required\n            id=\"desc-input\"\n            value={about || \"\"}\n            onChange={(e) => setAbout(e.target.value)}\n          />\n          <span className=\"popup__input-error\" id=\"desc-input-error\"></span>\n        </label>\n      </>\n    );\n  };\n\n  return (\n    <PopupWithForm\n      name=\"edit-profile\"\n      title=\"Edit Profile\"\n      buttonText=\"Save\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      children={editProfileChildren()}\n    />\n  );\n}\n\nexport default EditProfilePopup;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar }) {\n  const avatarRef = React.useRef();\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onUpdateAvatar({ avatar: avatarRef.current.value });\n  };\n  \n  const editAvatarChildren = () => {\n    return (\n      <>\n        <label className=\"popup__field\">\n          <input\n            type=\"url\"\n            className=\"popup__input popup__input_avatar\"\n            placeholder=\"Avatar Link\"\n            required\n            id=\"avatar-input\"\n            ref={avatarRef}\n          />\n          <span id=\"avatar-input-error\" className=\"popup__input-error\"></span>\n        </label>\n      </>\n    );\n  };\n  return (\n    <PopupWithForm\n      name=\"edit-avatar\"\n      title=\"Change Profile Picture\"\n      buttonText=\"Save\"\n      isOpen={isOpen}\n      onClose={onClose}\n      children={editAvatarChildren()}\n      onSubmit={handleSubmit}\n    />\n  );\n}\n\nexport default EditAvatarPopup;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace }) {\n  const nameRef = React.useRef();\n  const linkRef = React.useRef();\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onAddPlace({ name: nameRef.current.value, link: linkRef.current.value });\n  };\n\n  const addPlaceChildren = () => {\n    return (\n      <>\n        <label className=\"popup__field\">\n          <input\n            type=\"text\"\n            className=\"popup__input popup__input_name\"\n            placeholder=\"Title\"\n            minLength=\"1\"\n            maxLength=\"30\"\n            required\n            id=\"title-input\"\n            ref={nameRef}\n          />\n          <span className=\"popup__input-error\" id=\"title-input-error\"></span>\n        </label>\n        <label className=\"popup__field\">\n          <input\n            type=\"url\"\n            className=\"popup__input popup__input_link\"\n            placeholder=\"Image Link\"\n            required\n            id=\"link-input\"\n            ref={linkRef}\n          />\n          <span className=\"popup__input-error\" id=\"link-input-error\"></span>\n        </label>\n      </>\n    );\n  };\n  return (\n    <PopupWithForm\n      name=\"new-place\"\n      title=\"New Place\"\n      buttonText=\"Save\"\n      isOpen={isOpen}\n      onClose={onClose}\n      children={addPlaceChildren()}\n      onSubmit={handleSubmit}\n    />\n  );\n}\n\nexport default AddPlacePopup;\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nfunction Login({ onLogin }) {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onLogin({ email, password });\n  };\n  return (\n    <div className=\"form\">\n      <form className=\"form__container\" onSubmit={handleSubmit}>\n        <h1 className=\"form__title\">Log in</h1>\n        <input\n          className=\"form__input\"\n          type=\"email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          placeholder=\"Email\"\n        />\n        <input\n          className=\"form__input\"\n          type=\"password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          placeholder=\"Password\"\n        />\n        <button type=\"submit\" className=\"form__submit\">\n          Log in\n        </button>\n        <Link className=\"form__link\" to=\"/signup\">\n          Not a member yet? Sign up here!\n        </Link>\n      </form>\n    </div>\n  );\n}\n\nexport default Login;\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nfunction Register({ onRegister }) {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onRegister({ email, password });\n  };\n\n  return (\n    <div className=\"form\" onSubmit={handleSubmit}>\n      <form className=\"form__container\">\n        <h1 className=\"form__title\">Sign up</h1>\n        <input\n          className=\"form__input\"\n          type=\"email\"\n          value={email}\n          placeholder=\"Email\"\n          onChange={(e) => setEmail(e.target.value)}\n        />\n        <input\n          className=\"form__input\"\n          type=\"password\"\n          placeholder=\"Password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n        <button type=\"submit\" className=\"form__submit\">\n          Sign up\n        </button>\n        <Link className=\"form__link\" to=\"/signin\">\n          Already a member? Log in here!\n        </Link>\n      </form>\n    </div>\n  );\n}\n\nexport default Register;\n","import React from \"react\";\nimport imgSuccess from \"../images/success_tooltip.svg\";\nimport imgError from \"../images/error_tooltip.svg\";\n\nfunction InfoTooltip({ isOpen, onClose, type }) {\n  let src, alt, text;\n  switch (type) {\n    case \"success\":\n      src = imgSuccess;\n      alt = \"Pic: success\";\n      text = \"Success! You have now been registered.\";\n      break;\n    default:\n      src = imgError;\n      alt = \"Pic: error\";\n      text = \"Oops, something went wrong! Please try again.\";\n  }\n  return (\n    <div className={`popup ${isOpen && \"popup_is-opened\"}`}>\n      <div className=\"popup__container popup__container_form popup__container_tooltip\">\n        <img src={src} alt={alt} />\n        <p className=\"popup__text\">{text}</p>\n        <button className=\"button button_close\" onClick={onClose}></button>\n      </div>\n    </div>\n  );\n}\n\nexport default InfoTooltip;\n","class Api {\n  constructor({ baseUrl, headers }) {\n    this.baseUrl = baseUrl;\n    this.headers = headers;\n  }\n\n  _getResponseData(res) {\n    return res.ok ? res.json() : Promise.reject(`Error: ${res.status}`);\n  }\n\n  //GET Get initial cards\n  getInitialCards(token) {\n    return fetch(`${this.baseUrl}/cards`, {\n      headers: {\n        ...this.headers,\n        Authorization: `Bearer ${token}`,\n      },\n    }).then((res) => this._getResponseData(res));\n  }\n\n  //GET Get user info\n  getUserInfo(token) {\n    return fetch(`${this.baseUrl}/users/me`, {\n      headers: {\n        ...this.headers,\n        Authorization: `Bearer ${token}`,\n      },\n    }).then((res) => this._getResponseData(res));\n  }\n\n  //PATCH Set user info\n  setUserInfo({ name, about, token }) {\n    return fetch(`${this.baseUrl}/users/me`, {\n      method: \"PATCH\",\n      headers: {\n        ...this.headers,\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify({ name, about }),\n    }).then((res) => this._getResponseData(res));\n  }\n\n  //PATCH Set user avatar\n  setUserAvatar({ avatar, token }) {\n    return fetch(`${this.baseUrl}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: {\n        ...this.headers,\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify({ avatar }),\n    }).then((res) => this._getResponseData(res));\n  }\n\n  //POST Add new place\n  addCard({ name, link, token }) {\n    return fetch(`${this.baseUrl}/cards`, {\n      headers: {\n        ...this.headers,\n        Authorization: `Bearer ${token}`,\n      },\n      method: \"POST\",\n      body: JSON.stringify({ name, link }),\n    }).then((res) => this._getResponseData(res));\n  }\n\n  //DELETE Remove place\n  removeCard(cardId, token) {\n    return fetch(`${this.baseUrl}/cards/${cardId}`, {\n      headers: {\n        ...this.headers,\n        Authorization: `Bearer ${token}`,\n      },\n      method: \"DELETE\",\n    }).then((res) => this._getResponseData(res));\n  }\n\n  //PUT/DELETE Change Like status\n  changeLikeCardStatus(cardId, method, token) {\n    return fetch(`${this.baseUrl}/cards/${cardId}/likes/`, {\n      headers: {\n        ...this.headers,\n        Authorization: `Bearer ${token}`,\n      },\n      method: method,\n    }).then((res) => this._getResponseData(res));\n  }\n\n  //Get initial data\n  getAppInfo(token) {\n    return Promise.all([this.getInitialCards(token), this.getUserInfo(token)]);\n  }\n}\n\nconst api = new Api({\n  baseUrl: \"http://localhost:3000\",\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nexport default api;\n","class Auth {\n  constructor({ baseUrl, headers }) {\n    this.baseUrl = baseUrl;\n    this.headers = headers;\n  }\n\n  _getResponseData(res) {\n    return res.ok ? res.json() : Promise.reject(`Error: ${res.status}`);\n  }\n\n  //Register user\n  registerUser(data) {\n    return fetch(`${this.baseUrl}/signup`, {\n      method: \"POST\",\n      headers: this.headers,\n      body: JSON.stringify(data),\n    }).then(this._getResponseData);\n  }\n\n  //Sign in user\n  signInUser(data) {\n    return fetch(`${this.baseUrl}/signin`, {\n      method: \"POST\",\n      headers: this.headers,\n      body: JSON.stringify(data),\n    }).then(this._getResponseData);\n  }\n\n  //Check token and get user email\n  validateUser(token) {\n    return fetch(`${this.baseUrl}/users/me`, {\n      headers: {\n        ...this.headers,\n        Authorization: `Bearer ${token}`,\n      },\n    }).then(this._getResponseData);\n  }\n}\n\nconst auth = new Auth({\n  baseUrl: \"http://localhost:3000\",\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nexport default auth;\n","import React, { useState, useEffect } from \"react\";\nimport { Switch, Route, Redirect, useHistory } from \"react-router-dom\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport Header from \"./Header\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport PopupWithImage from \"./PopupWithImage\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport api from \"../utils/api\";\nimport auth from \"../utils/auth\";\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = useState(false);\n  const [isSuccessTooltipOpen, setIsSuccessTooltipOpen] = useState(false);\n  const [isErrorTooltipOpen, setIsErrorTooltipOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState({});\n  const [currentUser, setCurrentUser] = useState({});\n  const [cards, setCards] = useState([]);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [email, setEmail] = useState(\"\");\n  const [token, setToken] = useState(\"\");\n  const history = useHistory();\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"jwt\");\n    if (token) {\n      setToken(token);\n      validateAndSetUser(token);\n    }\n  }, []);\n\n  //Validate, register, login\n  const validateAndSetUser = (token) => {\n    auth\n      .validateUser(token)\n      .then((user) => {\n        setCurrentUser(user);\n        setLoggedIn(true);\n        setEmail(user.email);\n        api\n          .getInitialCards(token)\n          .then((cardListData) => setCards(cardListData))\n          .catch((err) => console.log(err));\n        history.push(\"/\");\n      })\n      .catch((err) => console.log(err));\n  };\n  const handleRegister = (data) => {\n    auth\n      .registerUser(data)\n      .then((res) => {\n        openSuccessTooltip();\n        history.push(\"/signin\");\n      })\n      .catch((err) => {\n        openErrorTooltip();\n        console.log(err);\n      });\n  };\n  const handleSignIn = (data) => {\n    auth\n      .signInUser(data)\n      .then(({ token }) => {\n        localStorage.setItem(\"jwt\", token);\n        setToken(token);\n        validateAndSetUser(token);\n      })\n      .catch((err) => {\n        openErrorTooltip();\n        console.log(err);\n      });\n  };\n  const handleSignOut = () => {\n    localStorage.removeItem(\"jwt\");\n    setToken(\"\");\n    setLoggedIn(false);\n    setEmail(\"\");\n    history.push(\"/signin\");\n  };\n  const openSuccessTooltip = () => {\n    setIsSuccessTooltipOpen(true);\n  };\n  const openErrorTooltip = () => {\n    setIsErrorTooltipOpen(true);\n  };\n\n  //User\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(true);\n  };\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true);\n  };\n  const handleUpdateUser = ({ name, about }) => {\n    api\n      .setUserInfo({ name, about, token })\n      .then((res) => {\n        setCurrentUser({\n          ...currentUser,\n          name: res.name,\n          about: res.about,\n        });\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  };\n  const handleUpdateAvatar = ({ avatar }) => {\n    api\n      .setUserAvatar({ avatar, token })\n      .then((res) => {\n        setCurrentUser({\n          ...currentUser,\n          avatar: res.avatar,\n        });\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  };\n\n  //Cards\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(true);\n  };\n  const handleAddPlaceSubmit = ({ name, link }) => {\n    api\n      .addCard({ name, link, token })\n      .then((newCard) => {\n        setCards([...cards, newCard]);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  };\n  const handleCardLike = (card) => {\n    const isLiked = card.likes.some((c) => c === currentUser._id);\n    api\n      .changeLikeCardStatus(card._id, isLiked ? \"DELETE\" : \"PUT\", token)\n      .then((newCard) => {\n        const newCards = cards.map((c) => (c._id === card._id ? newCard : c));\n        setCards(newCards);\n      })\n      .catch((err) => console.log(err));\n  };\n  const handleCardDelete = (card) => {\n    api\n      .removeCard(card._id, token)\n      .then((res) => {\n        const newCards = cards.filter((c) => c._id !== card._id);\n        setCards(newCards);\n      })\n      .catch((err) => console.log(err));\n  };\n  const handleCardClick = (card) => {\n    setIsImagePopupOpen(true);\n    setSelectedCard(card);\n  };\n\n  //Popups\n  const closeAllPopups = () => {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsImagePopupOpen(false);\n    setSelectedCard({});\n\n    setIsSuccessTooltipOpen(false);\n    setIsErrorTooltipOpen(false);\n  };\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <Header email={email} loggedIn={loggedIn} onSignOut={handleSignOut} />\n      <Switch>\n        <ProtectedRoute\n          component={Main}\n          exact\n          path=\"/\"\n          loggedIn={loggedIn}\n          cards={cards}\n          onCardClick={handleCardClick}\n          onCardDelete={handleCardDelete}\n          onCardLike={handleCardLike}\n          onEditProfile={handleEditProfileClick}\n          onEditAvatar={handleEditAvatarClick}\n          onAddPlace={handleAddPlaceClick}\n        />\n        <Route path=\"/signin\">\n          <Login onLogin={handleSignIn} />\n        </Route>\n        <Route path=\"/signup\">\n          <Register onRegister={handleRegister} />\n        </Route>\n        <Route>\n          <Redirect to={loggedIn ? \"/\" : \"/signin\"} />\n        </Route>\n      </Switch>\n      {loggedIn && <Footer />}\n      <EditProfilePopup\n        isOpen={isEditProfilePopupOpen}\n        onClose={closeAllPopups}\n        onUpdateUser={handleUpdateUser}\n      />\n      <EditAvatarPopup\n        isOpen={isEditAvatarPopupOpen}\n        onClose={closeAllPopups}\n        onUpdateAvatar={handleUpdateAvatar}\n      />\n      <AddPlacePopup\n        isOpen={isAddPlacePopupOpen}\n        onClose={closeAllPopups}\n        onAddPlace={handleAddPlaceSubmit}\n      />\n      <PopupWithImage\n        card={selectedCard}\n        isOpen={isImagePopupOpen}\n        onClose={closeAllPopups}\n      />\n      <InfoTooltip\n        type=\"success\"\n        isOpen={isSuccessTooltipOpen}\n        onClose={closeAllPopups}\n      />\n      <InfoTooltip\n        type=\"error\"\n        isOpen={isErrorTooltipOpen}\n        onClose={closeAllPopups}\n      />\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { HashRouter } from \"react-router-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\n\nReactDOM.render(\n  <HashRouter>\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>\n  </HashRouter>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}